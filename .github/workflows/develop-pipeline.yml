# .github/workflows/develop-pipeline.yml
name: Develop Pipeline

on:
  pull_request:
    branches:
      - develop

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout código
        uses: actions/checkout@v3

      - name: Aplicar migrações no Supabase (Develop)
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_DEVELOP_URL }}
          SUPABASE_KEY: ${{ secrets.SUPABASE_DEVELOP_KEY }}
        run: |
          echo "Aplicando migrações no Supabase para Develop..."
          for file in $(ls migrations/*.sql); do
            psql $SUPABASE_URL -U postgres -f $file
          done

      - name: Deploy do index.html (Develop)
        run: |
          echo "Realizando deploy do index.html para o ambiente Develop..."
          # Use Netlify, GitHub Pages, ou outra ferramenta para hospedar o arquivo
          cp index.html /path/to/develop/site
